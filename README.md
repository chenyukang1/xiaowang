# 小网项目

## 项目目的

这个项目并没有具体的业务实现。 旨在通过设计模式，或通过引入新的技术方案重构小网项目

## 项目架构

SpringBoot3 + JDK17

服务端支持多实例，Nginx 反向代理实现负载均衡

## 重构场景

### 装饰模式重构摄像头能力

在小网项目中，不同型号的摄像头以不同的协议接入平台，但实现的能力大同小异。一个摄像头基本的功能有：抓图，转动，PTZ 云台控制

考虑到后续会有更多不同型号的摄像头接入平台，因此总是需要对现有能力进行扩展，而使用继承扩展的一个缺点就是继承树的膨胀

因此使用装饰模式重构，具体地，实现基础装饰类 BaseCameraDecorator 作为所有具体装饰类的父类，将实现委托给具体的部件。
然后实现两个具体装饰类 RTMPCameraDecorator 和 VideoCameraDecorator，增强抓图的能力。最后，不同型号的摄像头通过对装饰器的组合构建自己的能力

### 策略模式 + 策略工厂消除 if-else

在操作摄像头场景，需要通过入参 command 调用摄像头不同的能力，如果使用 if-else 判断，不仅代码复杂性高，还会造成超大函数

因此使用策略模式工厂，定义顶层策略接口 CameraStrategy，实现三个具体策略：抓图、转动、PTZ 云台控制，最后通过 Spring IOC 完成工厂装配